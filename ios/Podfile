require File.join(File.dirname(`node --print "require.resolve('expo/package.json')"`), "scripts/autolinking")
require File.join(File.dirname(`node --print "require.resolve('react-native/package.json')"`), "scripts/react_native_pods")

platform :ios, '15.1'
install! 'cocoapods', deterministic_uuids: false

prepare_react_native_project!

target 'GridGeniusSudoku' do
  use_expo_modules!

  # Autolink all the native modules
  config = use_native_modules!([
    'npx', 'expo-modules-autolinking', 'react-native-config',
    '--json', '--platform', 'ios'
  ])

  # Ensure ExpoModulesCore is visible to EXAdsAdMob
  pod 'ExpoModulesCore', :path => '../node_modules/expo-modules-core/ios'

  use_react_native!(
    path: config[:reactNativePath],
    hermes_enabled: true,
    app_path: "#{Pod::Config.instance.installation_root}/.."
  )

  post_install do |installer|
    react_native_post_install(installer, config[:reactNativePath])
    installer.pod_targets.each do |pod|
      pod.build_configurations.each do |config|
        config.build_settings['CODE_SIGNING_ALLOWED'] = 'NO'
      end
    end
  end
end
